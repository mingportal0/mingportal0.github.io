---
title: Stream 공부 - 생성
excerpt: |
  Java8 부터 사용할 수 있는 Stream에 대해 정리해보았다. 정리 안하면 맨날 잊음 ㅠㅠ
author: content/authors/mingportal0.md
date: 2023-09-25T15:00:00.000Z
tags:
  - java
---

# for, foreach를 안쓰고 왜 Stream을 쓰는가?

* 병렬 처리가 가능하다.
* 코드의 양을 줄이고 간단하게 표현할 수 있다.
* 반복문을 여러번 도는 경우가 있는데 그것을 방지할 수 있다.

# 사용법

1. 생성
2. 가공
3. 결과

# 생성

## 배열 스트림

```java
String[] arr = new String[]{"a", "b", "c"};
Stream<String> stream1 = Arrays.stream(arr); // a, b, c
```

## 컬렉션 스트림

```java
List<String> list = Arrays.asList("a", "b", "c");
Stream<String> stream2 = list.stream(); // a, b, c
```

## 빈 스트림

`Stream.empty()`와 같이 사용한다.

## 스트림 빌더

```java
Stream<String> streamBuilder = Stream.<String>builder()
				.add("a").add("b").add("c")
				.build(); // a, b, c
```

## Stream.generate()

`public static <T> Stream<T> generate(Supplier<T> s) { ... }`와 같이 `Supplier<T>`는 인자가 없고 리턴값만 있기 때문에 아래와 같이 리턴값만 전달한다. 그리고 무한으로 생성되므로 limit를 정해주어야 한다.

```java
Stream<String> generatedStream = Stream.generate(() -> "a").limit(5); // a, a, a, a, a
```

## Stream.iterate()

파람에 초기값과 규칙을 정의한 람다를 넣는다.

```java
Stream<Integer> secondLevel = Stream.iterate(2, n -> n + 2).limit(9); // 2, 4, 6, 8, 10, 12, 14, 16, 18
```

## 기본타입 스트림

기본타입으로도 스트림을 만들 수 있다. boxed()를 사용해 Stream 타입으로 만들 수도 있다.

range는 마지막 파람을 포함하지 않고 생성하는 것.

```java
IntStream intStream = IntStream.range(1, 5); // 1, 2, 3, 4
LongStream longStream = LongStream.rangeClosed(1, 5); // 1, 2, 3, 4, 5
Stream<Integer> intBoxedStream = IntStream.range(1, 5).boxed(); // 1, 2, 3, 4
DoubleStream doubleStream = new Random().doubles(3); // 난수 3개 생성.
```

## 문자열 스트림

char 타입은 숫자이기도 하기 때문에 IntStream에 넣어도 된다.

```java
IntStream charsStream = "Stream".chars(); // 83, 116, 114, 101, 97, 109
Stream<String> regexStream = Pattern.compile(", ").splitAsStream("a, b, c"); // a, b, c
```

## 파일 스트림

java nio Files 클래스의 `lines()`는 파일을 한줄 한줄 읽으면서 Strem 타입으로 만들어준다.

```java
try {
    Stream<String> fileStream = Files.lines(Paths.get("파일경로"), Charset.forName("UTF-8"));
  } catch (IOException e) {
    e.printStackTrace();
}
```

## 병렬 스트림

병렬 스트림을 만드려면 `parallelStream()`이나 `parallel()`을 사용한다.

병렬 여부를 알고 싶다면 `isParallel()`을 사용한다.

다시 시퀀셜 모드로 변경하고 싶다면 `sequential()`을 사용한다.

```java
List<String> list2 = Arrays.asList("a", "b", "c"); 
Stream<String> parallelStream = list2.parallelStream(); //a, b, c

String[] arr2 = new String[]{"a", "b", "c"};
Stream<String> parallelStream2 = Arrays.stream(arr2).parallel(); //a, b, c

print("is parallel?", parallelStream.isParallel()); //true

Stream<String> sequentialStream = parallelStream.sequential();
print("is parallel?", sequentialStream.isParallel()); //false
```

## 스트림 연결

`Stream.concat()`을 사용해 두 스트림을 연결할 수 있다.

```java
Stream<String> stream3 = Stream.of("a", "b", "C");
Stream<String> stream4 = Stream.of("d", "e", "f");
printStream("stream3 + stream4", Stream.concat(stream3, stream4)); //a, b, c, d, e, f
```

# 참고

[https://futurecreator.github.io/2018/08/26/java-8-streams/](https://futurecreator.github.io/2018/08/26/java-8-streams/)
